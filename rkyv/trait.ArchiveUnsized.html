<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A counterpart of [`Archive`] that’s suitable for unsized types."><meta name="keywords" content="rust, rustlang, rust-lang, ArchiveUnsized"><title>rkyv::ArchiveUnsized - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script id="default-settings"></script><script src="../storage.js"></script><script src="../crates.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../favicon.svg">
<link rel="alternate icon" type="image/png" href="../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc trait"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../rkyv/index.html'><div class='logo-container rust-logo'><img src='../rust-logo.png' alt='logo'></div></a><p class="location">Trait ArchiveUnsized</p><div class="sidebar-elems"><div class="block items"><a class="sidebar-title" href="#associated-types">Associated Types</a><div class="sidebar-links"><a href="#associatedtype.Archived">Archived</a><a href="#associatedtype.MetadataResolver">MetadataResolver</a></div><a class="sidebar-title" href="#required-methods">Required Methods</a><div class="sidebar-links"><a href="#tymethod.resolve_metadata">resolve_metadata</a></div><a class="sidebar-title" href="#provided-methods">Provided Methods</a><div class="sidebar-links"><a href="#method.resolve_unsized">resolve_unsized</a></div><a class="sidebar-title" href="#foreign-impls">Implementations on Foreign Types</a><div class="sidebar-links"><a href="#impl-ArchiveUnsized-for-%5BT%5D">[T]</a><a href="#impl-ArchiveUnsized-for-str">str</a></div><a class="sidebar-title" href="#implementors">Implementors</a></div><p class="location"><a href="index.html">rkyv</a></p><div id="sidebar-vars" data-name="ArchiveUnsized" data-ty="trait" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu"><img src="../brush.svg" width="18" height="18" alt="Pick another theme!"></button><div id="theme-choices" role="menu"></div></div><script src="../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" class="help-button">?</button>
                <a id="settings-menu" href="../settings.html"><img src="../wheel.svg" width="18" height="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Trait <a href="index.html">rkyv</a>::<wbr><a class="trait" href="">ArchiveUnsized</a></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/rkyv/lib.rs.html#490-523" title="goto source code">[src]</a></span></h1><div class="docblock type-decl hidden-by-usual-hider"><pre class="rust trait">pub trait ArchiveUnsized: <a class="trait" href="../ptr_meta/trait.Pointee.html" title="trait ptr_meta::Pointee">Pointee</a> {
    type <a href="#associatedtype.Archived" class="type">Archived</a>: <a class="trait" href="../rkyv/trait.ArchivePointee.html" title="trait rkyv::ArchivePointee">ArchivePointee</a> + ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>;
    type <a href="#associatedtype.MetadataResolver" class="type">MetadataResolver</a>;
    fn <a href="#tymethod.resolve_metadata" class="fnname">resolve_metadata</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolver: Self::<a class="type" href="../rkyv/trait.ArchiveUnsized.html#associatedtype.MetadataResolver" title="type rkyv::ArchiveUnsized::MetadataResolver">MetadataResolver</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;out: &amp;mut <a class="union" href="https://doc.rust-lang.org/nightly/core/mem/maybe_uninit/union.MaybeUninit.html" title="union core::mem::maybe_uninit::MaybeUninit">MaybeUninit</a>&lt;<a class="type" href="../rkyv/type.ArchivedMetadata.html" title="type rkyv::ArchivedMetadata">ArchivedMetadata</a>&lt;Self&gt;&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;);

    fn <a href="#method.resolve_unsized" class="fnname">resolve_unsized</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolver: Self::<a class="type" href="../rkyv/trait.ArchiveUnsized.html#associatedtype.MetadataResolver" title="type rkyv::ArchiveUnsized::MetadataResolver">MetadataResolver</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;out: &amp;mut <a class="union" href="https://doc.rust-lang.org/nightly/core/mem/maybe_uninit/union.MaybeUninit.html" title="union core::mem::maybe_uninit::MaybeUninit">MaybeUninit</a>&lt;<a class="struct" href="../rkyv/struct.RelPtr.html" title="struct rkyv::RelPtr">RelPtr</a>&lt;Self::<a class="type" href="../rkyv/trait.ArchiveUnsized.html#associatedtype.Archived" title="type rkyv::ArchiveUnsized::Archived">Archived</a>&gt;&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;) { ... }
}</pre></div><div class="docblock"><p>A counterpart of <a href="../rkyv/trait.Archive.html" title="Archive"><code>Archive</code></a> that’s suitable for unsized types.</p>
<p>Instead of archiving its value directly, <code>ArchiveUnsized</code> archives a <a href="../rkyv/struct.RelPtr.html" title="RelPtr"><code>RelPtr</code></a> to its archived
type. As a consequence, its resolver must be <code>usize</code>.</p>
<p><code>ArchiveUnsized</code> is automatically implemented for all types that implement <a href="../rkyv/trait.Archive.html" title="Archive"><code>Archive</code></a>.</p>
<p><code>ArchiveUnsized</code> is already implemented for slices and string slices, and the <code>rkyv_dyn</code> crate
can be used to archive trait objects. Other unsized types must manually implement
<code>ArchiveUnsized</code>.</p>
<h2 id="examples" class="section-header"><a href="#examples">Examples</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">core</span>::{
    <span class="ident">mem</span>::{<span class="ident">transmute</span>, <span class="ident">MaybeUninit</span>},
    <span class="ident">ops</span>::{<span class="ident">Deref</span>, <span class="ident">DerefMut</span>},
};
<span class="kw">use</span> <span class="ident">ptr_meta</span>::<span class="ident">Pointee</span>;
<span class="kw">use</span> <span class="ident">rkyv</span>::{
    <span class="ident">archived_unsized_value</span>,
    <span class="ident">offset_of</span>,
    <span class="ident">ser</span>::{<span class="ident">serializers</span>::<span class="ident">AlignedSerializer</span>, <span class="ident">Serializer</span>},
    <span class="ident">AlignedVec</span>,
    <span class="ident">Archive</span>,
    <span class="ident">Archived</span>,
    <span class="ident">ArchivedMetadata</span>,
    <span class="ident">ArchivedUsize</span>,
    <span class="ident">ArchivePointee</span>,
    <span class="ident">ArchiveUnsized</span>,
    <span class="ident">RelPtr</span>,
    <span class="ident">Serialize</span>,
    <span class="ident">SerializeUnsized</span>,
};

<span class="comment">// We&#39;re going to be dealing mostly with blocks that have a trailing slice</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Block</span><span class="op">&lt;</span><span class="ident">H</span>, <span class="ident">T</span>: <span class="question-mark">?</span><span class="ident">Sized</span><span class="op">&gt;</span> {
    <span class="ident">head</span>: <span class="ident">H</span>,
    <span class="ident">tail</span>: <span class="ident">T</span>,
}

<span class="kw">impl</span><span class="op">&lt;</span><span class="ident">H</span>, <span class="ident">T</span><span class="op">&gt;</span> <span class="ident">Pointee</span> <span class="kw">for</span> <span class="ident">Block</span><span class="op">&lt;</span><span class="ident">H</span>, [<span class="ident">T</span>]<span class="op">&gt;</span> {
    <span class="kw">type</span> <span class="ident">Metadata</span> <span class="op">=</span> <span class="ident">usize</span>;
}

<span class="comment">// For blocks with trailing slices, we need to store the length of the slice</span>
<span class="comment">// in the metadata.</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">BlockSliceMetadata</span> {
    <span class="ident">len</span>: <span class="ident">ArchivedUsize</span>,
}

<span class="comment">// ArchivePointee is automatically derived for sized types because pointers</span>
<span class="comment">// to sized types don&#39;t need to store any extra information. Because we&#39;re</span>
<span class="comment">// making an unsized block, we need to define what metadata gets stored with</span>
<span class="comment">// our data pointer.</span>
<span class="kw">impl</span><span class="op">&lt;</span><span class="ident">H</span>, <span class="ident">T</span><span class="op">&gt;</span> <span class="ident">ArchivePointee</span> <span class="kw">for</span> <span class="ident">Block</span><span class="op">&lt;</span><span class="ident">H</span>, [<span class="ident">T</span>]<span class="op">&gt;</span> {
    <span class="comment">// This is the extra data that needs to get stored for blocks with</span>
    <span class="comment">// trailing slices</span>
    <span class="kw">type</span> <span class="ident">ArchivedMetadata</span> <span class="op">=</span> <span class="ident">BlockSliceMetadata</span>;

    <span class="comment">// We need to be able to turn our archived metadata into regular</span>
    <span class="comment">// metadata for our type</span>
    <span class="kw">fn</span> <span class="ident">pointer_metadata</span>(
        <span class="ident">archived</span>: <span class="kw-2">&amp;</span><span class="self">Self</span>::<span class="ident">ArchivedMetadata</span>
    ) <span class="op">-</span><span class="op">&gt;</span> <span class="op">&lt;</span><span class="self">Self</span> <span class="kw">as</span> <span class="ident">Pointee</span><span class="op">&gt;</span>::<span class="ident">Metadata</span> {
        <span class="ident">archived</span>.<span class="ident">len</span> <span class="kw">as</span> <span class="ident">usize</span>
    }
}

<span class="comment">// We&#39;re implementing ArchiveUnsized for just Block&lt;H, [T]&gt;. We can still</span>
<span class="comment">// implement Archive for blocks with sized tails and they won&#39;t conflict.</span>
<span class="kw">impl</span><span class="op">&lt;</span><span class="ident">H</span>: <span class="ident">Archive</span>, <span class="ident">T</span>: <span class="ident">Archive</span><span class="op">&gt;</span> <span class="ident">ArchiveUnsized</span> <span class="kw">for</span> <span class="ident">Block</span><span class="op">&lt;</span><span class="ident">H</span>, [<span class="ident">T</span>]<span class="op">&gt;</span> {
    <span class="comment">// We&#39;ll reuse our block type as our archived type.</span>
    <span class="kw">type</span> <span class="ident">Archived</span> <span class="op">=</span> <span class="ident">Block</span><span class="op">&lt;</span><span class="ident">Archived</span><span class="op">&lt;</span><span class="ident">H</span><span class="op">&gt;</span>, [<span class="ident">Archived</span><span class="op">&lt;</span><span class="ident">T</span><span class="op">&gt;</span>]<span class="op">&gt;</span>;

    <span class="comment">// This is where we&#39;d put any resolve data for our metadata.</span>
    <span class="comment">// Most of the time, this can just be () because most metadata is Copy,</span>
    <span class="comment">// but the option is there if you need it.</span>
    <span class="kw">type</span> <span class="ident">MetadataResolver</span> <span class="op">=</span> ();

    <span class="comment">// Here&#39;s where we make the metadata for our pointer.</span>
    <span class="comment">// This also gets the position and resolver for the metadata, but we</span>
    <span class="comment">// don&#39;t need it in this case.</span>
    <span class="kw">fn</span> <span class="ident">resolve_metadata</span>(
        <span class="kw-2">&amp;</span><span class="self">self</span>,
        <span class="kw">_</span>: <span class="ident">usize</span>,
        <span class="kw">_</span>: <span class="self">Self</span>::<span class="ident">MetadataResolver</span>,
        <span class="ident">out</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">MaybeUninit</span><span class="op">&lt;</span><span class="ident">ArchivedMetadata</span><span class="op">&lt;</span><span class="self">Self</span><span class="op">&gt;</span><span class="op">&gt;</span>,
    ) {
        <span class="kw">unsafe</span> {
            <span class="ident">out</span>.<span class="ident">as_mut_ptr</span>().<span class="ident">write</span>(<span class="ident">BlockSliceMetadata</span> {
                <span class="ident">len</span>: <span class="self">self</span>.<span class="ident">tail</span>.<span class="ident">len</span>() <span class="kw">as</span> <span class="ident">ArchivedUsize</span>,
            });
        }
    }
}

<span class="comment">// The bounds we use on our serializer type indicate that we need basic</span>
<span class="comment">// serializer capabilities, and then whatever capabilities our head and tail</span>
<span class="comment">// types need to serialize themselves.</span>
<span class="kw">impl</span><span class="op">&lt;</span>
    <span class="ident">H</span>: <span class="ident">Serialize</span><span class="op">&lt;</span><span class="ident">S</span><span class="op">&gt;</span>,
    <span class="ident">T</span>: <span class="ident">Serialize</span><span class="op">&lt;</span><span class="ident">S</span><span class="op">&gt;</span>,
    <span class="ident">S</span>: <span class="ident">Serializer</span> <span class="op">+</span> <span class="question-mark">?</span><span class="ident">Sized</span>
<span class="op">&gt;</span> <span class="ident">SerializeUnsized</span><span class="op">&lt;</span><span class="ident">S</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">Block</span><span class="op">&lt;</span><span class="ident">H</span>, [<span class="ident">T</span>]<span class="op">&gt;</span> {
    <span class="comment">// This is where we construct our unsized type in the serializer</span>
    <span class="kw">fn</span> <span class="ident">serialize_unsized</span>(
        <span class="kw-2">&amp;</span><span class="self">self</span>,
        <span class="ident">serializer</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">S</span>
    ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">usize</span>, <span class="ident">S</span>::<span class="ident">Error</span><span class="op">&gt;</span> {
        <span class="comment">// First, we archive the head and all the tails. This will make sure</span>
        <span class="comment">// that when we finally build our block, we don&#39;t accidentally mess</span>
        <span class="comment">// up the structure with serialized dependencies.</span>
        <span class="kw">let</span> <span class="ident">head_resolver</span> <span class="op">=</span> <span class="self">self</span>.<span class="ident">head</span>.<span class="ident">serialize</span>(<span class="ident">serializer</span>)<span class="question-mark">?</span>;
        <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">resolvers</span> <span class="op">=</span> <span class="ident">Vec</span>::<span class="ident">new</span>();
        <span class="kw">for</span> <span class="ident">tail</span> <span class="kw">in</span> <span class="self">self</span>.<span class="ident">tail</span>.<span class="ident">iter</span>() {
            <span class="ident">resolvers</span>.<span class="ident">push</span>(<span class="ident">tail</span>.<span class="ident">serialize</span>(<span class="ident">serializer</span>)<span class="question-mark">?</span>);
        }
        <span class="comment">// Now we align our serializer for our archived type and write it.</span>
        <span class="comment">// We can&#39;t align for unsized types so we treat the trailing slice</span>
        <span class="comment">// like an array of 0 length for now.</span>
        <span class="ident">serializer</span>.<span class="ident">align_for</span>::<span class="op">&lt;</span><span class="ident">Block</span><span class="op">&lt;</span><span class="ident">Archived</span><span class="op">&lt;</span><span class="ident">H</span><span class="op">&gt;</span>, [<span class="ident">Archived</span><span class="op">&lt;</span><span class="ident">T</span><span class="op">&gt;</span>; <span class="number">0</span>]<span class="op">&gt;</span><span class="op">&gt;</span>()<span class="question-mark">?</span>;
        <span class="kw">let</span> <span class="ident">result</span> <span class="op">=</span> <span class="kw">unsafe</span> {
            <span class="ident">serializer</span>.<span class="ident">resolve_aligned</span>(<span class="kw-2">&amp;</span><span class="self">self</span>.<span class="ident">head</span>, <span class="ident">head_resolver</span>)<span class="question-mark">?</span>
        };
        <span class="ident">serializer</span>.<span class="ident">align_for</span>::<span class="op">&lt;</span><span class="ident">Archived</span><span class="op">&lt;</span><span class="ident">T</span><span class="op">&gt;</span><span class="op">&gt;</span>()<span class="question-mark">?</span>;
        <span class="kw">for</span> (<span class="ident">item</span>, <span class="ident">resolver</span>) <span class="kw">in</span> <span class="self">self</span>.<span class="ident">tail</span>.<span class="ident">iter</span>().<span class="ident">zip</span>(<span class="ident">resolvers</span>.<span class="ident">drain</span>(..)) {
            <span class="kw">unsafe</span> {
                <span class="ident">serializer</span>.<span class="ident">resolve_aligned</span>(<span class="ident">item</span>, <span class="ident">resolver</span>)<span class="question-mark">?</span>;
            }
        }
        <span class="prelude-val">Ok</span>(<span class="ident">result</span>)
    }

    <span class="comment">// This is where we serialize the metadata for our type. In this case,</span>
    <span class="comment">// we do all the work in resolve and don&#39;t need to do anything here.</span>
    <span class="kw">fn</span> <span class="ident">serialize_metadata</span>(
        <span class="kw-2">&amp;</span><span class="self">self</span>,
        <span class="ident">serializer</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">S</span>
    ) <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="self">Self</span>::<span class="ident">MetadataResolver</span>, <span class="ident">S</span>::<span class="ident">Error</span><span class="op">&gt;</span> {
        <span class="prelude-val">Ok</span>(())
    }
}

<span class="kw">let</span> <span class="ident">value</span> <span class="op">=</span> <span class="ident">Block</span> {
    <span class="ident">head</span>: <span class="string">&quot;Numbers 1-4&quot;</span>.<span class="ident">to_string</span>(),
    <span class="ident">tail</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],
};
<span class="comment">// We have a Block&lt;String, [i32; 4]&gt; but we want to it to be a</span>
<span class="comment">// Block&lt;String, [i32]&gt;, so we need to do more pointer transmutation</span>
<span class="kw">let</span> <span class="ident">ptr</span> <span class="op">=</span> (<span class="kw-2">&amp;</span><span class="ident">value</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">Block</span><span class="op">&lt;</span><span class="ident">String</span>, [<span class="ident">i32</span>; <span class="number">4</span>]<span class="op">&gt;</span>).<span class="ident">cast</span>::<span class="op">&lt;</span>()<span class="op">&gt;</span>();
<span class="kw">let</span> <span class="ident">unsized_value</span> <span class="op">=</span> <span class="kw">unsafe</span> {
    <span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">transmute</span>::<span class="op">&lt;</span>(<span class="kw-2">*</span><span class="kw">const</span> (), <span class="ident">usize</span>), <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">Block</span><span class="op">&lt;</span><span class="ident">String</span>, [<span class="ident">i32</span>]<span class="op">&gt;</span><span class="op">&gt;</span>((<span class="ident">ptr</span>, <span class="number">4</span>))
};

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">serializer</span> <span class="op">=</span> <span class="ident">AlignedSerializer</span>::<span class="ident">new</span>(<span class="ident">AlignedVec</span>::<span class="ident">new</span>());
<span class="kw">let</span> <span class="ident">pos</span> <span class="op">=</span> <span class="ident">serializer</span>.<span class="ident">serialize_unsized_value</span>(<span class="ident">unsized_value</span>)
    .<span class="ident">expect</span>(<span class="string">&quot;failed to archive block&quot;</span>);
<span class="kw">let</span> <span class="ident">buf</span> <span class="op">=</span> <span class="ident">serializer</span>.<span class="ident">into_inner</span>();

<span class="kw">let</span> <span class="ident">archived_ref</span> <span class="op">=</span> <span class="kw">unsafe</span> {
    <span class="ident">archived_unsized_value</span>::<span class="op">&lt;</span><span class="ident">Block</span><span class="op">&lt;</span><span class="ident">String</span>, [<span class="ident">i32</span>]<span class="op">&gt;</span><span class="op">&gt;</span>(<span class="ident">buf</span>.<span class="ident">as_slice</span>(), <span class="ident">pos</span>)
};
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">archived_ref</span>.<span class="ident">head</span>, <span class="string">&quot;Numbers 1-4&quot;</span>);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">archived_ref</span>.<span class="ident">tail</span>.<span class="ident">len</span>(), <span class="number">4</span>);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">archived_ref</span>.<span class="ident">tail</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]);</pre></div>
</div><h2 id="associated-types" class="small-section-header">Associated Types<a href="#associated-types" class="anchor"></a></h2><div class="methods"><h3 id="associatedtype.Archived" class="method"><code>type <a href="#associatedtype.Archived" class="type">Archived</a>: <a class="trait" href="../rkyv/trait.ArchivePointee.html" title="trait rkyv::ArchivePointee">ArchivePointee</a> + ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a></code><a class="srclink" href="../src/rkyv/lib.rs.html#492" title="goto source code">[src]</a></h3><div class="docblock"><p>The archived counterpart of this type. Unlike <code>Archive</code>, it may be unsized.</p>
</div><h3 id="associatedtype.MetadataResolver" class="method"><code>type <a href="#associatedtype.MetadataResolver" class="type">MetadataResolver</a></code><a class="srclink" href="../src/rkyv/lib.rs.html#495" title="goto source code">[src]</a></h3><div class="docblock"><p>The resolver for the metadata of this type.</p>
</div></div><span class="loading-content">Loading content...</span><h2 id="required-methods" class="small-section-header">Required methods<a href="#required-methods" class="anchor"></a></h2><div class="methods"><h3 id="tymethod.resolve_metadata" class="method"><code>fn <a href="#tymethod.resolve_metadata" class="fnname">resolve_metadata</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;pos: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;resolver: Self::<a class="type" href="../rkyv/trait.ArchiveUnsized.html#associatedtype.MetadataResolver" title="type rkyv::ArchiveUnsized::MetadataResolver">MetadataResolver</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;out: &amp;mut <a class="union" href="https://doc.rust-lang.org/nightly/core/mem/maybe_uninit/union.MaybeUninit.html" title="union core::mem::maybe_uninit::MaybeUninit">MaybeUninit</a>&lt;<a class="type" href="../rkyv/type.ArchivedMetadata.html" title="type rkyv::ArchivedMetadata">ArchivedMetadata</a>&lt;Self&gt;&gt;<br>)</code><a class="srclink" href="../src/rkyv/lib.rs.html#504-509" title="goto source code">[src]</a></h3><div class="docblock"><p>Creates the archived version of the metadata for this value at the given position and writes
it to the given output.</p>
<p>The output should be initialized field-by-field rather than by writing a whole struct. This
is because performing a typed copy will set all of the padding bytes to uninitialized, but
they must remain whatever value they currently have. This is so that uninitialized memory
doesn’t get leaked to the final archive.</p>
</div></div><span class="loading-content">Loading content...</span><h2 id="provided-methods" class="small-section-header">Provided methods<a href="#provided-methods" class="anchor"></a></h2><div class="methods"><h3 id="method.resolve_unsized" class="method"><code>fn <a href="#method.resolve_unsized" class="fnname">resolve_unsized</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;from: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;to: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;resolver: Self::<a class="type" href="../rkyv/trait.ArchiveUnsized.html#associatedtype.MetadataResolver" title="type rkyv::ArchiveUnsized::MetadataResolver">MetadataResolver</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;out: &amp;mut <a class="union" href="https://doc.rust-lang.org/nightly/core/mem/maybe_uninit/union.MaybeUninit.html" title="union core::mem::maybe_uninit::MaybeUninit">MaybeUninit</a>&lt;<a class="struct" href="../rkyv/struct.RelPtr.html" title="struct rkyv::RelPtr">RelPtr</a>&lt;Self::<a class="type" href="../rkyv/trait.ArchiveUnsized.html#associatedtype.Archived" title="type rkyv::ArchiveUnsized::Archived">Archived</a>&gt;&gt;<br>)</code><a class="srclink" href="../src/rkyv/lib.rs.html#514-522" title="goto source code">[src]</a></h3><div class="docblock"><p>Resolves a relative pointer to this value with the given <code>from</code> and <code>to</code> and writes it to
the given output.</p>
</div></div><span class="loading-content">Loading content...</span><h2 id="foreign-impls" class="small-section-header">Implementations on Foreign Types<a href="#foreign-impls" class="anchor"></a></h2><h3 id="impl-ArchiveUnsized-for-%5BT%5D" class="impl"><code class="in-band">impl&lt;T:&nbsp;<a class="trait" href="../rkyv/trait.Archive.html" title="trait rkyv::Archive">Archive</a>&gt; <a class="trait" href="../rkyv/trait.ArchiveUnsized.html" title="trait rkyv::ArchiveUnsized">ArchiveUnsized</a> for <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">[</a>T<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a></code><a href="#impl-ArchiveUnsized-for-%5BT%5D" class="anchor"></a><a class="srclink" href="../src/rkyv/core_impl/mod.rs.html#465-482" title="goto source code">[src]</a></h3><div class="impl-items"><h4 id="associatedtype.Archived-1" class="type"><code>type <a href="#associatedtype.Archived" class="type">Archived</a> = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">[</a>T::<a class="type" href="../rkyv/trait.Archive.html#associatedtype.Archived" title="type rkyv::Archive::Archived">Archived</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a></code></h4><h4 id="associatedtype.MetadataResolver-1" class="type"><code>type <a href="#associatedtype.MetadataResolver" class="type">MetadataResolver</a> = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a></code></h4><h4 id="method.resolve_metadata" class="method hidden"><code>fn <a href="#method.resolve_metadata" class="fnname">resolve_metadata</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;_: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;_: Self::<a class="type" href="../rkyv/trait.ArchiveUnsized.html#associatedtype.MetadataResolver" title="type rkyv::ArchiveUnsized::MetadataResolver">MetadataResolver</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;out: &amp;mut <a class="union" href="https://doc.rust-lang.org/nightly/core/mem/maybe_uninit/union.MaybeUninit.html" title="union core::mem::maybe_uninit::MaybeUninit">MaybeUninit</a>&lt;<a class="type" href="../rkyv/type.ArchivedMetadata.html" title="type rkyv::ArchivedMetadata">ArchivedMetadata</a>&lt;Self&gt;&gt;<br>)</code><a class="srclink" href="../src/rkyv/core_impl/mod.rs.html#471-481" title="goto source code">[src]</a></h4></div><h3 id="impl-ArchiveUnsized-for-str" class="impl"><code class="in-band">impl <a class="trait" href="../rkyv/trait.ArchiveUnsized.html" title="trait rkyv::ArchiveUnsized">ArchiveUnsized</a> for <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a></code><a href="#impl-ArchiveUnsized-for-str" class="anchor"></a><a class="srclink" href="../src/rkyv/core_impl/mod.rs.html#601-618" title="goto source code">[src]</a></h3><div class="impl-items"><h4 id="associatedtype.Archived-2" class="type"><code>type <a href="#associatedtype.Archived" class="type">Archived</a> = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a></code></h4><h4 id="associatedtype.MetadataResolver-2" class="type"><code>type <a href="#associatedtype.MetadataResolver" class="type">MetadataResolver</a> = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a></code></h4><h4 id="method.resolve_metadata-1" class="method hidden"><code>fn <a href="#method.resolve_metadata" class="fnname">resolve_metadata</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;_: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;_: Self::<a class="type" href="../rkyv/trait.ArchiveUnsized.html#associatedtype.MetadataResolver" title="type rkyv::ArchiveUnsized::MetadataResolver">MetadataResolver</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;out: &amp;mut <a class="union" href="https://doc.rust-lang.org/nightly/core/mem/maybe_uninit/union.MaybeUninit.html" title="union core::mem::maybe_uninit::MaybeUninit">MaybeUninit</a>&lt;<a class="type" href="../rkyv/type.ArchivedMetadata.html" title="type rkyv::ArchivedMetadata">ArchivedMetadata</a>&lt;Self&gt;&gt;<br>)</code><a class="srclink" href="../src/rkyv/core_impl/mod.rs.html#607-617" title="goto source code">[src]</a></h4></div><span class="loading-content">Loading content...</span><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor"></a></h2><div class="item-list" id="implementors-list"><h3 id="impl-ArchiveUnsized" class="impl"><code class="in-band">impl&lt;T:&nbsp;<a class="trait" href="../rkyv/trait.Archive.html" title="trait rkyv::Archive">Archive</a>&gt; <a class="trait" href="../rkyv/trait.ArchiveUnsized.html" title="trait rkyv::ArchiveUnsized">ArchiveUnsized</a> for T</code><a href="#impl-ArchiveUnsized" class="anchor"></a><a class="srclink" href="../src/rkyv/core_impl/mod.rs.html#41-54" title="goto source code">[src]</a></h3><div class="impl-items"><h4 id="associatedtype.Archived-3" class="type"><code>type <a href="#associatedtype.Archived-3" class="type">Archived</a> = T::<a class="type" href="../rkyv/trait.Archive.html#associatedtype.Archived" title="type rkyv::Archive::Archived">Archived</a></code></h4><h4 id="associatedtype.MetadataResolver-3" class="type"><code>type <a href="#associatedtype.MetadataResolver-3" class="type">MetadataResolver</a> = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a></code></h4><h4 id="method.resolve_metadata-2" class="method hidden"><code>fn <a href="#method.resolve_metadata-2" class="fnname">resolve_metadata</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;_: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;_: Self::<a class="type" href="../rkyv/trait.ArchiveUnsized.html#associatedtype.MetadataResolver" title="type rkyv::ArchiveUnsized::MetadataResolver">MetadataResolver</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;_: &amp;mut <a class="union" href="https://doc.rust-lang.org/nightly/core/mem/maybe_uninit/union.MaybeUninit.html" title="union core::mem::maybe_uninit::MaybeUninit">MaybeUninit</a>&lt;<a class="type" href="../rkyv/type.ArchivedMetadata.html" title="type rkyv::ArchivedMetadata">ArchivedMetadata</a>&lt;Self&gt;&gt;<br>)</code><a class="srclink" href="../src/rkyv/core_impl/mod.rs.html#47-53" title="goto source code">[src]</a></h4></div></div><span class="loading-content">Loading content...</span><script type="text/javascript" src="../implementors/rkyv/trait.ArchiveUnsized.js" async></script></section><section id="search" class="content hidden"></section><section class="footer"></section><div id="rustdoc-vars" data-root-path="../" data-current-crate="rkyv" data-search-js="../search-index.js"></div>
    <script src="../main.js"></script></body></html>